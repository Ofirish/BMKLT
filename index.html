<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS Bookmarklet Library V2</title>
    <style>
        :root {
            --primary: #2563eb;
            --primary-hover: #1d4ed8;
            --bg: #f3f4f6;
            --sidebar-bg: #111827;
            --sidebar-text: #e5e7eb;
            --text: #374151;
            --card-bg: #ffffff;
            --border: #e5e7eb;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            display: flex;
            height: 100vh;
            background-color: var(--bg);
            color: var(--text);
            overflow: hidden; /* Prevent body scroll */
        }

        /* --- SIDEBAR --- */
        .sidebar {
            width: 280px;
            background-color: var(--sidebar-bg);
            color: var(--sidebar-text);
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
            transition: transform 0.3s ease;
            z-index: 10;
        }

        .sidebar-header {
            padding: 20px;
            background: rgba(0,0,0,0.2);
            border-bottom: 1px solid #374151;
        }

        .logo {
            font-size: 1.2rem;
            font-weight: 800;
            margin-bottom: 15px;
            display: block;
            color: white;
            letter-spacing: -0.5px;
        }

        /* Search Box */
        .search-box {
            width: 100%;
            padding: 10px;
            background: #374151;
            border: 1px solid #4b5563;
            border-radius: 6px;
            color: white;
            font-size: 0.9rem;
            box-sizing: border-box;
            outline: none;
        }
        .search-box:focus { border-color: var(--primary); }
        .search-box::placeholder { color: #9ca3af; }

        .sidebar-content {
            flex: 1;
            overflow-y: auto;
            padding: 10px 0;
        }

        .category-label {
            padding: 20px 20px 8px;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: #6b7280;
            font-weight: bold;
        }

        .menu-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.95rem;
            border-left: 3px solid transparent;
            color: #d1d5db;
        }

        .menu-item:hover {
            background-color: #1f2937;
            color: white;
        }

        .menu-item.active {
            background-color: rgba(37, 99, 235, 0.1);
            border-left-color: var(--primary);
            color: white;
        }

        /* --- MAIN CONTENT --- */
        .main-content {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
            position: relative;
        }

        .mobile-toggle {
            display: none;
            position: absolute;
            top: 20px;
            left: 20px;
            background: var(--sidebar-bg);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 6px;
            cursor: pointer;
            z-index: 20;
        }

        h1 { margin: 0 0 10px 0; color: #111827; font-size: 1.8rem; }
        
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            border: 1px solid var(--border);
            max-width: 800px;
            width: 100%;
            box-sizing: border-box;
            margin: 0 auto;
        }

        .description {
            color: #6b7280;
            margin-bottom: 25px;
            line-height: 1.6;
            font-size: 1.05rem;
        }

        /* Code Area */
        .code-container {
            position: relative;
            margin-bottom: 25px;
        }

        .code-label {
            font-size: 0.8rem;
            font-weight: 600;
            color: #6b7280;
            margin-bottom: 8px;
            display: block;
            text-transform: uppercase;
        }

        textarea {
            width: 100%;
            height: 120px;
            padding: 15px;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
            font-size: 0.85rem;
            resize: none;
            color: #334155;
            box-sizing: border-box;
            line-height: 1.4;
        }
        textarea:focus { outline: 2px solid var(--primary); border-color: transparent; }

        /* Actions Area */
        .action-row {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            font-size: 0.95rem;
            justify-content: center;
        }

        .btn-secondary {
            background-color: white;
            border: 1px solid #d1d5db;
            color: #374151;
        }
        .btn-secondary:hover { background-color: #f9fafb; border-color: #9ca3af; }

        /* The Drag Button */
        .bookmarklet-drag-btn {
            background-color: var(--primary);
            color: white;
            cursor: grab;
            border: 1px solid var(--primary);
            box-shadow: 0 2px 4px rgba(37, 99, 235, 0.2);
        }
        .bookmarklet-drag-btn:hover {
            background-color: var(--primary-hover);
            transform: translateY(-1px);
            box-shadow: 0 4px 6px rgba(37, 99, 235, 0.3);
        }
        .bookmarklet-drag-btn:active { cursor: grabbing; }

        .note-box {
            margin-top: 20px;
            font-size: 0.85rem;
            color: #b91c1c;
            background: #fef2f2;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #fecaca;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .hidden { display: none !important; }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                height: 100%;
                transform: translateX(-100%);
                box-shadow: 5px 0 15px rgba(0,0,0,0.1);
            }
            .sidebar.open { transform: translateX(0); }
            .mobile-toggle { display: block; }
            .main-content { padding: 60px 20px 20px; }
        }
    </style>
</head>
<body>

    <!-- Mobile Toggle -->
    <button class="mobile-toggle" onclick="toggleSidebar()">☰ Menu</button>

    <!-- SIDEBAR -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <span class="logo">JS Bookmarks</span>
            <input type="text" id="searchInput" class="search-box" placeholder="Search tools..." onkeyup="filterSidebar()">
        </div>
        <div class="sidebar-content" id="sidebarContent">
            <!-- Items inserted by JS -->
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <div class="main-content" onclick="closeSidebarOnMobile()">
        <div id="content-area">
            <!-- Dynamic Content Load Here -->
        </div>
    </div>

    <script>
        // --- DATA ---
        const library = [
            {
                category: "Text Tools",
                items: [
                    {
                        title: "Edit Website Content",
                        desc: "Turns the entire webpage into an editable text document. Great for mocking up changes.",
                        code: `javascript:document.body.contentEditable = 'true'; document.designMode='on'; void 0;`
                    },
                    {
                        title: "Remove Sticky Headers",
                        desc: "Zaps those annoying fixed headers and footers that take up screen space.",
                        code: `javascript:(function(){var e=document.querySelectorAll("*");for(var i=0;i<e.length;i++){var s=getComputedStyle(e[i]);if(s.position==="fixed"||s.position==="sticky"){e[i].parentNode.removeChild(e[i]);}}})();`
                    },
                    {
                        title: "Enable Right Click",
                        desc: "Re-enables context menus and copy/paste on restricted sites.",
                        code: `javascript:(function(){function allow(e){e.stopImmediatePropagation();return true;}['contextmenu','selectstart','dragstart','copy','cut','paste'].forEach(function(ev){document.addEventListener(ev,allow,true);});document.body.oncontextmenu=null;document.body.onselectstart=null;document.body.ondragstart=null;alert('Right click enabled!');})();`
                    },
                                        {
                        title: "RTL The Page",
                        desc: "Turn the text direction on the page to Right to Left.",
                        code: `javascript: (function() { var elements = document.getElementsByTagName("*"); for (e of elements) { if (!e.style) continue;if (!e.style.direction || e.style.direction === 'ltr' ) e.style.direction = 'rtl'; else e.style.direction = 'ltr'; } } )()`
                    }
                ]
            },
            {
                category: "Visual & Design",
                items: [
                    {
                        title: "Force Dark Mode",
                        desc: "Inverts colors on bright websites to save your eyes at night.",
                        code: `javascript:(function(){var s=document.createElement('style');s.innerHTML='html { filter: invert(100%); } img, video { filter: invert(100%); }';document.head.appendChild(s);})();`
                    },
                    {
                        title: "Extract Images",
                        desc: "Opens a gallery view of all images found on the current page.",
                        code: `javascript:(function(){var i,imgs=document.images,w=window.open('about:blank');w.document.write('<h1>Images extracted</h1>');for(i=0;i<imgs.length;i++){w.document.write('<img src="'+imgs[i].src+'" style="max-width:200px;margin:10px;border:1px solid #ccc;"/>');}w.document.close();})();`
                    },
                    {
                        title: "Visual Inspector",
                        desc: " outlines elements in red when you hover over them. Useful for debugging layout.",
                        code: `javascript:(function(){var style=document.createElement('style');style.innerHTML='*:hover{outline:1px solid red !important; cursor:crosshair !important;}';document.head.appendChild(style);})();`
                    }
                ]
            },
            {
                category: "Video & Media",
                items: [
                    {
                        title: "Picture in Picture",
                        desc: "Pops the video out of the browser window so you can watch while working.",
                        code: `javascript:(function(){var v=document.querySelector('video');if(v){v.requestPictureInPicture()}else{alert('No video found');}})();`
                    },
                    {
                        title: "Speed Up (2.5x)",
                        desc: "Forces HTML5 videos to play at 2.5x speed.",
                        code: `javascript:(function(){document.querySelectorAll('video').forEach(v=>v.playbackRate=2.5);})();`
                    }
                ]
            },
            {
                category: "AI & Utilities",
                items: [
                    {
                        title: "Summarize Page (ChatGPT)",
                        desc: "Sends the current URL to ChatGPT and asks for a summary.",
                        code: `javascript:(function(){window.open('https://chatgpt.com/?q=Please summarize this article: '+encodeURIComponent(window.location.href));})();`
                    },
                    {
                        title: "Wayback Machine",
                        desc: "Checks the Internet Archive for previous versions of this page.",
                        code: `javascript:(function(){window.open('https://web.archive.org/web/*/'+location.href);})();`
                    },
                    {
                        title: "Show Passwords",
                        desc: "Reveals the text inside password fields.",
                        code: `javascript:(function(){var f=document.querySelectorAll('input[type=password]');f.forEach(i=>i.type='text');})();`
                    }
                ]
            }
        ];

        // --- STATE ---
        let currentCategoryIndex = 0;
        let currentItemIndex = 0;

        // --- DOM ELEMENTS ---
        const sidebarContent = document.getElementById('sidebarContent');
        const contentArea = document.getElementById('content-area');
        const sidebar = document.getElementById('sidebar');

        // --- RENDER SIDEBAR ---
        function renderSidebar(filter = "") {
            sidebarContent.innerHTML = "";
            let hasResults = false;

            library.forEach((cat, catIdx) => {
                // Filter items inside category
                const filteredItems = cat.items.filter(item => 
                    item.title.toLowerCase().includes(filter.toLowerCase())
                );

                if (filteredItems.length > 0) {
                    hasResults = true;
                    // Header
                    const header = document.createElement('div');
                    header.className = 'category-label';
                    header.innerText = cat.category;
                    sidebarContent.appendChild(header);

                    // Items
                    filteredItems.forEach((item, itemIdx) => {
                        // Find original index for click handler
                        const originalItemIdx = cat.items.indexOf(item);
                        
                        const div = document.createElement('div');
                        div.className = `menu-item ${catIdx === currentCategoryIndex && originalItemIdx === currentItemIndex ? 'active' : ''}`;
                        div.innerText = item.title;
                        div.onclick = () => {
                            currentCategoryIndex = catIdx;
                            currentItemIndex = originalItemIdx;
                            renderSidebar(filter); // Re-render to update active class
                            loadContent(catIdx, originalItemIdx);
                            if(window.innerWidth <= 768) toggleSidebar();
                        };
                        sidebarContent.appendChild(div);
                    });
                }
            });

            if (!hasResults) {
                sidebarContent.innerHTML = `<div style="padding:20px; color:#6b7280; text-align:center;">No tools found</div>`;
            }
        }

        // --- RENDER CONTENT ---
        function loadContent(catIdx, itemIdx) {
            const item = library[catIdx].items[itemIdx];
            
            contentArea.innerHTML = `
                <div class="card">
                    <h1>${item.title}</h1>
                    <p class="description">${item.desc}</p>
                    
                    <div class="code-container">
                        <span class="code-label">JavaScript Code</span>
                        <textarea id="codeField" readonly spellcheck="false">${item.code}</textarea>
                    </div>

                    <div class="action-row">
                        <a href="${item.code}" class="btn bookmarklet-drag-btn" onclick="return false;">
                            <span>★</span> Drag to Bookmarks Bar
                        </a>
                        <button class="btn btn-secondary" onclick="copyCode()">
                            Copy to Clipboard
                        </button>
                    </div>

                    <div class="note-box">
                        <span style="font-size:1.5em">ℹ</span>
                        <div>
                            <strong>Installation:</strong> Drag the blue button directly into your browser's bookmarks bar.<br>
                            Clicking the button won't work due to browser security restrictions.
                        </div>
                    </div>
                </div>
            `;
        }

        // --- UTILS ---
        function copyCode() {
            const field = document.getElementById('codeField');
            field.select();
            navigator.clipboard.writeText(field.value).then(() => {
                const btn = document.querySelector('.btn-secondary');
                const prev = btn.innerText;
                btn.innerText = "Copied!";
                btn.style.borderColor = "#10b981";
                btn.style.color = "#10b981";
                setTimeout(() => {
                    btn.innerText = prev;
                    btn.style.borderColor = "";
                    btn.style.color = "";
                }, 2000);
            });
        }

        function filterSidebar() {
            const val = document.getElementById('searchInput').value;
            renderSidebar(val);
        }

        function toggleSidebar() {
            sidebar.classList.toggle('open');
        }

        function closeSidebarOnMobile() {
            if (window.innerWidth <= 768) {
                sidebar.classList.remove('open');
            }
        }

        // --- INIT ---
        renderSidebar();
        loadContent(0, 0);

    </script>
</body>
</html>
